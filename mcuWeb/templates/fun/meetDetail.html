{% extends "base.html" %}

{% load static %}

{% block title %}会议控制{% endblock %}

{% block csss %}
<link href="{% static "css/meetinglist.css" %}" rel="stylesheet" media="screen">
{% endblock %}

{% block content %}
<!-- 页标 -->
<div class="row-fluid">
	<div class="span8 offset1">
		<p>会议控制</p>
	</div>
</div>
<!-- 会议信息显示 -->
<div class="row-fluid">
	<div class="span8 offset2">
	1234
	{{meetInstance.bandwidth}}

	<hr>
	</div>
</div>
<!-- 列表显示 -->
<div class="row-fluid">
	<div class="span8 offset2">
		<table class="table table-condensed">
		  <thead>
		    <tr>
		      <th>#</th>
		      <th>终端名称</th>
		      <th>终端IP:</th>
		      <th>连接状态</th>
		      <th>连接</th>
		      <th>断开</th>
		      <th>静音</th>
		      <th>闭麦</th>
		      <th>双流</th>
		    </tr>
		  </thead>
		  {% for terminal in terminalList %}
		  <tbody>
		    <tr>
		      <td>{{ forloop.counter }}</td>
		      <td>{{terminal.name}}</td>
		      <td>{{terminal.terminalIP}}</td>
		      <td class="unconnect"><button></button></td>
		      <td class="callmember"><a class="btn" onclick="callmember({{terminal.pk}})"> </a></td>
		      <td class="hangup" ><a class="btn" onclick="hangup({{terminal.pk}})"> </a></td>
		      <td class="silencemember0" ><a class="btn" onclick="silencemember({{terminal.pk}})"> </a></td>
		      <td class="shutup0" ><a class="btn" onclick="shutup({{terminal.pk}})" > </a></td>
		      <td class="double0"><a class="btn" onclick="double({{terminal.pk}})" > </a></td>
		    </tr>
		  </tbody>
		  {% endfor %}
		</table>
		<a type="button" class="btn" href="/meetinglist">返回</a>
	</div>
</div>


{% endblock %}

{% block js %}
<script type="text/javascript">
$('document').ready(function(){
	$('div#pill2').attr('class','accordion-body collapse in');
	$(function(){
		function getmeetinfo(){
			$.get("/getmeetinfo/"+{{meetInstance.pk}}+"/",function(){

			});
		}
		// getmeetinfo();
		setInterval(getmeetinfo,2000);// 心跳10秒
	});
});

function callmember(pk){
  console.log(pk);
  $.get("/callmember/"+ {{meetInstance.pk}}+"/" +pk+"/",function(){

  });
};

function hangup(pk){
  console.log(pk);
  $.get("/hangup/"+pk+"/",function(){

  });
};
function silencemember(pk){
  console.log(pk);
  $.get("/silencemember/"+pk+"/",function(){
  	$('.silencemember0').attr('class','silencemember');

  });
};

function shutup(pk){
  console.log(pk);
  $.get("/shutup/"+pk+"/",function(){

  });
};

function double(pk){
  console.log(pk);
  $.get("/double/"+pk+"/",function(){

  });
};



</script>
{% endblock %}
