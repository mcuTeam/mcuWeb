{% extends "base.html" %}

{% load static %}

{% block title %}会议控制{% endblock %}

{% block csss %}
<link href="{% static "css/meetinglist.css" %}" rel="stylesheet" media="screen">
{% endblock %}

{% block content %}
<!-- 页标 -->
<div class="row-fluid">
	<div class="span8 offset1">
		<p>会议控制</p>
	</div>
</div>
<!-- 会议信息显示 -->
<div class="row-fluid">
	<div class="span8 offset2" id="meetinfo">
		<div class="row-fluid">
			<div class="span4">
				<p><strong>会议名称：</strong>{{meetInstance.name}}</p>
				<p><strong>带宽：</strong>{{meetInstance.bandwidth}}</p>
				<p><strong>视频分辨率：</strong>{{meetInstance.capalityname}}</p>
			</div>
			<div class="span4">
				<p><strong>会议编号：</strong>{{meetInstance.meetcode}}</p>
				<p><strong>视频协议：</strong>{{meetInstance.videoProtocol}}</p>
				<p><strong>音频协议：</strong>{{meetInstance.audioProtocol}}</p>
			</div>
			<div class="span4">
				<p><strong>会议备注：</strong>{{meetInstance.remark}}</p>
				<p><strong>视频帧率：</strong>{{meetInstance.videoFrameRate}}</p>
				
			</div>
		</div>
	</div>
</div>
<!-- 列表显示 -->
<div class="row-fluid">
	<div class="span8 offset2">
		<table class="table table-condensed">
		  <thead>
		    <tr>
		      <th>#</th>
		      <th>终端名称</th>
		      <th>终端IP:</th>
		      <th>连接状态</th>
		      <th>连接</th>
		      <th>断开</th>
		      <th>静音</th>
		      <th>闭麦</th>
		      <th>双流</th>
		    </tr>
		  </thead>
		  {% for terminal in terminalList %}
		  <tbody>
		    <tr>
		      <td>{{ forloop.counter }}</td>
		      <td>{{terminal.name}}</td>
		      <td>{{terminal.terminalIP}}</td>
		      <td class="unconnect"><button></button></td>
		      <td class="callmember"><a class="btn" onclick="callmember({{terminal.pk}})"> </a></td>
		      <td class="hangup" ><a class="btn" onclick="hangup({{terminal.pk}})"> </a></td>
		      <td class="silencemember0" ><a class="btn" onclick="silencemember({{terminal.pk}})"> </a></td>
		      <td class="shutup0" ><a class="btn" onclick="shutup({{terminal.pk}})" > </a></td>
		      <td class="double0"><a class="btn" onclick="double({{terminal.pk}})" > </a></td>
		    </tr>
		  </tbody>
		  {% endfor %}
		</table>
		<a type="button" class="btn" href="/meetinglist">返回</a>
	</div>
</div>


{% endblock %}

{% block js %}
<script type="text/javascript">
$('document').ready(function(){
	$('div#pill2').attr('class','accordion-body collapse in');
	$(function(){
		function getmeetinfo(){
			$.get("/getmeetinfo/"+{{meetInstance.pk}}+"/",function(){

			});
		}
		setInterval(getmeetinfo,2000);// 2秒状态轮询
	});
});

// $('.silencemember0').on('click',function(){
// 	$(this).attr('class','silencemember');
// });

// $('.silencemember').on('click',function(){
// 	$(this).attr('class','silencemember0');
// });


function callmember(pk){
  console.log(pk);
  $.get("/callmember/"+ {{meetInstance.pk}}+"/" +pk+"/",function(){

  });
};

function hangup(pk){
  console.log(pk);
  $.get("/hangup/"+ {{meetInstance.pk}}+"/"+pk+"/",function(){

  });
};
function silencemember(pk){
  console.log(pk);
  



  $.get("/silencemember/"+ {{meetInstance.pk}}+"/"+pk+"/",function(){


  });
};

function shutup(pk){
  console.log(pk);
  $.get("/shutup/"+ {{meetInstance.pk}}+"/"+pk+"/",function(){

  });
};

function double(pk){
  console.log(pk);
  $.get("/double/"+ {{meetInstance.pk}}+"/"+pk+"/",function(){

  });
};



</script>
{% endblock %}
